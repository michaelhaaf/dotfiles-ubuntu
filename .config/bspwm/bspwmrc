#!/bin/bash

sxhkd &
xcompmgr -c -n &
monitor-setup

bspc config remove_unplugged_monitors true
monitors=($(bspc query -M | uniq))

pic=`find ~/Pictures/Wallpapers/ | sort -R | tail -1`
nitrogen --head=0 --set-zoom-fill $pic

# TODO: refactor, this could be much better lol
[[ "${#monitors[@]}" = 1 ]] && \
	bspc monitor "${monitors[0]}" -d 1 2 3 4 5 6 7 8 9 10
[[ "${#monitors[@]}" = 2 ]] && \
	bspc monitor "${monitors[0]}" -d 1 2 3 4 5 && \
	bspc monitor "${monitors[1]}" -d 6 7 8 9 10 && \
	nitrogen --head=1 --set-zoom-fill $pic
[[ "${#monitors[@]}" = 3 ]] && \
	bspc monitor "${monitors[0]}" -d 1 2 3 4 && \
	bspc monitor "${monitors[1]}" -d 5 6 7 && \
	bspc monitor "${monitors[2]}" -d 8 9 10 && \
	nitrogen --head=1 --set-zoom-fill $pic && \
	nitrogen --head=2 --set-zoom-fill $pic

bspc config border_width         2
bspc config window_gap           7

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# set border colours
~/.config/bspwm/bspwm_colors.sh &

$HOME/.config/polybar/launch.sh
$HOME/.xinitrc
